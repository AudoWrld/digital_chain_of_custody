{% extends 'base.html' %}
{% load static %}

{% block title %}My Reports - ChainProof{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/reports/my_reports.css' %}?v={{ STATIC_VERSION }}" />
{% endblock %}

{% block content %}
<div class="my-reports-container">
    <div class="my-reports-header">
        <div class="my-reports-title">
            <h1>My Reports</h1>
        </div>
        <span class="my-reports-count">{{ total_count }} Reports Submitted</span>
    </div>

    {% if reports %}
    <div class="my-reports-card">
        <div class="my-reports-section-header">
            <i class='bx bx-file-alt'></i>
            <h2 class="my-reports-section-title">Submitted Analysis Reports</h2>
            <span class="my-reports-count-badge">{{ reports|length }} items</span>
        </div>
        <div class="my-reports-list">
            {% for report in reports %}
            <a href="{% url 'reports:evidence_reports' report.evidence.id %}" class="my-report-item">
                <div class="my-report-icon">
                    <i class='bx bx-file'></i>
                </div>
                <div class="my-report-content">
                    <div class="my-report-title">{{ report.title }}</div>
                    <div class="my-report-meta">
                        <span>Case: <a href="{% url 'cases:view_case' report.case.case_id %}">{{ report.case.case_id }}</a></span>
                        {% if report.evidence %}
                        <span>| Evidence: #{{ report.evidence.id }}</span>
                        {% endif %}
                    </div>
                </div>
                <div class="my-report-actions">
                    <span class="cases-status-badge cases-status-{{ report.status }}">
                        {% if report.status == 'draft' %}
                            <i class='bx bx-pencil'></i>
                        {% elif report.status == 'submitted' %}
                            <i class='bx bx-send'></i>
                        {% elif report.status == 'reviewed' %}
                            <i class='bx bx-check-circle'></i>
                        {% elif report.status == 'approved' %}
                            <i class='bx bx-award'></i>
                        {% endif %}
                        {{ report.get_status_display }}
                    </span>
                    <span class="my-report-date">{{ report.created_at|date:"M d, Y H:i" }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="my-reports-empty">
        <i class='bx bx-file-blank'></i>
        <p>No reports submitted yet. Analyze evidence to create reports.</p>
        <a href="{% url 'evidence:all_evidence' %}" class="dashboard-create-btn">
            <i class='bx bx-search'></i> Browse Evidence
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
